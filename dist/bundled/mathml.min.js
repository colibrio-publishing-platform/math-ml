var mathml=function(e){"use strict";var a=Math.max;function t(e){let t=L.get(e.type);void 0===t&&(t=new Map,L.set(e.type,t));let n=t.get(e.strings);return void 0===n&&(n=new g(e,e.getTemplateElement()),t.set(e.strings,n)),n}function n(e,t){const{element:{content:r},parts:n}=e,o=document.createTreeWalker(r,q,null,!1);let a=B(n),d=n[a],i=-1,l=0;const s=[];for(let r=null;o.nextNode();){i++;const e=o.currentNode;for(e.previousSibling===r&&(r=null),t.has(e)&&(s.push(e),null===r&&(r=e)),null!==r&&l++;void 0!==d&&d.index===i;)d.index=null===r?d.index-l:-1,a=B(n,a),d=n[a]}s.forEach(e=>e.parentNode.removeChild(e))}function r(e,t,n=null){const{element:{content:o},parts:r}=e;if(null===n||void 0===n)return void o.appendChild(t);const a=document.createTreeWalker(o,q,null,!1);let d=B(r),i=0,l=-1;for(;a.nextNode();){l++;const e=a.currentNode;for(e===n&&(i=V(t),n.parentNode.insertBefore(t,n));-1!==d&&r[d].index===l;){if(0<i){for(;-1!==d;)r[d].index+=i,d=B(r,d);return}d=B(r,d)}}}function o(e){return ne(e)}const d=new WeakMap,i=e=>"function"==typeof e&&d.has(e),l=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,s=(e,t,n=null)=>{for(let r=t;r!==n;){const t=r.nextSibling;e.removeChild(r),r=t}},p={},h=`{{lit-${(Math.random()+"").slice(2)}}}`,c=`<!--${h}-->`,u=new RegExp(`${h}|${c}`),m=(()=>{const e=document.createElement("div");return e.setAttribute("style","{{bad value}}"),"{{bad value}}"!==e.getAttribute("style")})();class g{constructor(e,t){this.parts=[],this.element=t;let n=-1,r=0;const o=[],a=t=>{const d=t.content,i=document.createTreeWalker(d,133,null,!1);let l,s;for(;i.nextNode();){n++,l=s;const t=s=i.currentNode;if(1===t.nodeType){if(t.hasAttributes()){const o=t.attributes;let a=0;for(let e=0;e<o.length;e++)0<=o[e].value.indexOf(h)&&a++;for(;0<a--;){const o=e.strings[r],a=b.exec(o)[2],d=m&&"style"===a?"style$":/^[a-zA-Z-]*$/.test(a)?a:a.toLowerCase(),i=t.getAttribute(d),l=i.split(u);this.parts.push({type:"attribute",index:n,name:a,strings:l}),t.removeAttribute(d),r+=l.length-1}}"TEMPLATE"===t.tagName&&a(t)}else if(3===t.nodeType){const e=t.nodeValue;if(0>e.indexOf(h))continue;const a=t.parentNode,d=e.split(u),l=d.length-1;r+=l;for(let e=0;e<l;e++)a.insertBefore(""===d[e]?f():document.createTextNode(d[e]),t),this.parts.push({type:"node",index:n++});a.insertBefore(""===d[l]?f():document.createTextNode(d[l]),t),o.push(t)}else if(8===t.nodeType)if(t.nodeValue===h){const e=t.parentNode,a=t.previousSibling;null===a||a!==l||a.nodeType!==Node.TEXT_NODE?e.insertBefore(f(),t):n--,this.parts.push({type:"node",index:n++}),o.push(t),null===t.nextSibling?e.insertBefore(f(),t):n--,s=l,r++}else for(let e=-1;-1!==(e=t.nodeValue.indexOf(h,e+1));)this.parts.push({type:"node",index:-1})}};a(t);for(const r of o)r.parentNode.removeChild(r)}}const y=e=>-1!==e.index,f=()=>document.createComment(""),b=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class E{constructor(e,t,n){this._parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this._parts)void 0!==n&&n.setValue(e[t]),t++;for(const t of this._parts)void 0!==t&&t.commit()}_clone(){const e=l?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=this.template.parts;let n=0,r=0;const o=e=>{const a=document.createTreeWalker(e,133,null,!1);for(let d=a.nextNode();n<t.length&&null!==d;){const e=t[n];if(!y(e))this._parts.push(void 0),n++;else if(r===e.index){if("node"===e.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(d),this._parts.push(e)}else this._parts.push(...this.processor.handleAttributeExpressions(d,e.name,e.strings,this.options));n++}else r++,"TEMPLATE"===d.nodeName&&o(d.content),d=a.nextNode()}};return o(e),l&&(document.adoptNode(e),customElements.upgrade(e)),e}}class P{constructor(e,t,n,r){this.strings=e,this.values=t,this.type=n,this.processor=r}getHTML(){const e=this.strings.length-1;let t="",n=!0;for(let r=0;r<e;r++){const e=this.strings[r];t+=e;const o=e.lastIndexOf(">");n=(-1<o||n)&&-1===e.indexOf("<",o+1),!n&&m&&(t=t.replace(b,(e,t,n,r)=>"style"===n?`${t}style$${r}`:e)),t+=n?c:h}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}const w=e=>null===e||"object"!=typeof e&&"function"!=typeof e;class S{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let r=0;r<n.length-1;r++)this.parts[r]=this._createPart()}_createPart(){return new v(this)}_getValue(){const e=this.strings,t=e.length-1;let n="";for(let r=0;r<t;r++){n+=e[r];const t=this.parts[r];if(void 0!==t){const e=t.value;if(null!=e&&(Array.isArray(e)||"string"!=typeof e&&e[Symbol.iterator]))for(const r of e)n+="string"==typeof r?r:r+"";else n+="string"==typeof e?e:e+""}}return n+=e[t],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class v{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===p||w(e)&&e===this.value||(this.value=e,!i(e)&&(this.committer.dirty=!0))}commit(){for(;i(this.value);){const e=this.value;this.value=p,e(this)}this.value===p||this.committer.commit()}}class M{constructor(e){this.value=void 0,this._pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(f()),this.endNode=e.appendChild(f())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e._insert(this.startNode=f()),e._insert(this.endNode=f())}insertAfterPart(e){e._insert(this.startNode=f()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this._pendingValue=e}commit(){for(;i(this._pendingValue);){const e=this._pendingValue;this._pendingValue=p,e(this)}const e=this._pendingValue;e===p||(w(e)?e!==this.value&&this._commitText(e):e instanceof P?this._commitTemplateResult(e):e instanceof Node?this._commitNode(e):Array.isArray(e)||e[Symbol.iterator]?this._commitIterable(e):void 0===e.then?this._commitText(e):this._commitPromise(e))}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_commitNode(e){this.value===e||(this.clear(),this._insert(e),this.value=e)}_commitText(e){const t=this.startNode.nextSibling;e=null==e?"":e,t===this.endNode.previousSibling&&t.nodeType===Node.TEXT_NODE?t.textContent=e:this._commitNode(document.createTextNode("string"==typeof e?e:e+"")),this.value=e}_commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value&&this.value.template===t)this.value.update(e.values);else{const n=new E(t,e.processor,this.options),r=n._clone();n.update(e.values),this._commitNode(r),this.value=n}}_commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,r=0;for(const o of e)n=t[r],void 0===n&&(n=new M(this.options),t.push(n),0==r?n.appendIntoPart(this):n.insertAfterPart(t[r-1])),n.setValue(o),n.commit(),r++;r<t.length&&(t.length=r,this.clear(n&&n.endNode))}_commitPromise(e){this.value=e,e.then(t=>{this.value===e&&(this.setValue(t),this.commit())})}clear(e=this.startNode){s(this.startNode.parentNode,e.nextSibling,this.endNode)}}class _{constructor(e,t,n){if(this.value=void 0,this._pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this._pendingValue=e}commit(){for(;i(this._pendingValue);){const e=this._pendingValue;this._pendingValue=p,e(this)}if(this._pendingValue!==p){const e=!!this._pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=e,this._pendingValue=p}}}class N extends S{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new x(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class x extends v{}let C=!1;try{const e={get capture(){return C=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}class T{constructor(e,t,n){this.value=void 0,this._pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n}setValue(e){this._pendingValue=e}commit(){for(;i(this._pendingValue);){const e=this._pendingValue;this._pendingValue=p,e(this)}if(this._pendingValue===p)return;const e=this._pendingValue,t=this.value,n=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive);n&&this.element.removeEventListener(this.eventName,this,this._options),this._options=R(e),null!=e&&(null==t||n)&&this.element.addEventListener(this.eventName,this,this._options),this.value=e,this._pendingValue=p}handleEvent(e){const t="function"==typeof this.value?this.value:"function"==typeof this.value.handleEvent?this.value.handleEvent:()=>null;t.call(this.eventContext||this.element,e)}}const R=e=>e&&(C?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);const O=new class{handleAttributeExpressions(e,t,n,r){const o=t[0];if("."===o){const r=new N(e,t.slice(1),n);return r.parts}if("@"===o)return[new T(e,t.slice(1),r.eventContext)];if("?"===o)return[new _(e,t.slice(1),n)];const a=new S(e,t,n);return a.parts}handleTextExpression(e){return new M(e)}},L=new Map,A=new WeakMap,j=(e,n,r)=>{let o=A.get(n);void 0===o&&(s(n,n.firstChild),A.set(n,o=new M(Object.assign({templateFactory:t},r))),o.appendInto(n)),o.setValue(e),o.commit()},D=(e,...t)=>new P(e,t,"html",O),q=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT,V=e=>{let t=e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?0:1;for(const n=document.createTreeWalker(e,q,null,!1);n.nextNode();)t++;return t},B=(e,t=-1)=>{for(let n=t+1;n<e.length;n++){const t=e[n];if(y(t))return n}return-1},k=(e,t)=>`${e}--${t}`;let U=!0;"undefined"==typeof window.ShadyCSS?U=!1:"undefined"==typeof window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected.Please update to at least @webcomponents/webcomponentsjs@2.0.2 and@webcomponents/shadycss@1.3.1."),U=!1);const F=e=>t=>{const n=k(t.type,e);let r=L.get(n);void 0===r&&(r=new Map,L.set(n,r));let o=r.get(t.strings);if(void 0===o){const n=t.getTemplateElement();U&&window.ShadyCSS.prepareTemplateDom(n,e),o=new g(t,n),r.set(t.strings,o)}return o},I=["html","svg"],z=e=>{I.forEach(t=>{const r=L.get(k(t,e));void 0!==r&&r.forEach(e=>{const{element:{content:t}}=e,r=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{r.add(e)}),n(e,r)})})},H=new Set,W=(e,t,o)=>{H.add(o);const a=e.querySelectorAll("style");if(0!==a.length){const d=document.createElement("style");for(let e=0;e<a.length;e++){const t=a[e];t.parentNode.removeChild(t),d.textContent+=t.textContent}if(z(o),r(t,d,t.element.content.firstChild),window.ShadyCSS.prepareTemplateStyles(t.element,o),window.ShadyCSS.nativeShadow){const n=t.element.content.querySelector("style");e.insertBefore(n.cloneNode(!0),e.firstChild)}else{t.element.content.insertBefore(d,t.element.content.firstChild);const e=new Set;e.add(d),n(t,e)}}},G=(e,t,n)=>{const r=n.scopeName,o=A.has(t);if(j(e,t,Object.assign({templateFactory:F(r)},n)),t instanceof ShadowRoot&&U&&e instanceof P){if(!H.has(r)){const e=A.get(t),n=e.value;W(t,n.template,r)}o||window.ShadyCSS.styleElement(t.host)}},X=e=>null!==e,$=e=>e?"":null,K=(e,t)=>t!==e&&(t===t||e===e),J={attribute:!0,type:String,reflect:!1,hasChanged:K},Y=new Promise(e=>e(!0)),Z=1,Q=4,ee=8;class te extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=Y,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this._finalize();const e=[];for(const[t,n]of this._classProperties){const r=this._attributeNameForProperty(t,n);void 0!==r&&(this._attributeToPropertyMap.set(r,t),e.push(r))}return e}static createProperty(e,t=J){if(!this.hasOwnProperty("_classProperties")){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}if(this._classProperties.set(e,t),this.prototype.hasOwnProperty(e))return;const n="symbol"==typeof e?Symbol():`__${e}`;Object.defineProperty(this.prototype,e,{get(){return this[n]},set(r){const o=this[e];this[n]=r,this._requestPropertyUpdate(e,o,t)},configurable:!0,enumerable:!0})}static _finalize(){if(this.hasOwnProperty("_finalized")&&this._finalized)return;const e=Object.getPrototypeOf(this);"function"==typeof e._finalize&&e._finalize(),this._finalized=!0,this._attributeToPropertyMap=new Map;const t=this.properties,n=[...Object.getOwnPropertyNames(t),...("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[])];for(const e of n)this.createProperty(e,t[e])}static _attributeNameForProperty(e,t){const n=void 0!==t&&t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,n=K){return n(e,t)}static _propertyValueFromAttribute(e,t){const n=t&&t.type;if(void 0===n)return e;const r=n===Boolean?X:"function"==typeof n?n:n.fromAttribute;return r?r(e):e}static _propertyValueToAttribute(e,t){if(void 0!==t&&void 0!==t.reflect){const n=t.type===Boolean?$:t.type&&t.type.toAttribute||String;return n(e)}}initialize(){this.renderRoot=this.createRenderRoot(),this._saveInstanceProperties()}_saveInstanceProperties(){for(const[e]of this.constructor._classProperties)if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}}_applyInstanceProperties(){for(const[e,t]of this._instanceProperties)this[e]=t;this._instanceProperties=void 0}createRenderRoot(){return this.attachShadow({mode:"open"})}connectedCallback(){this._updateState&Z?void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this):this.requestUpdate()}disconnectedCallback(){}attributeChangedCallback(e,t,n){t!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,t,n=J){const r=this.constructor,o=r._propertyValueToAttribute(t,n);if(void 0!==o){const t=r._attributeNameForProperty(e,n);void 0!==t&&(this._updateState|=ee,null===o?this.removeAttribute(t):this.setAttribute(t,o),this._updateState&=~ee)}}_attributeToProperty(e,t){if(!(this._updateState&ee)){const n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){const e=n._classProperties.get(r);this[r]=n._propertyValueFromAttribute(t,e)}}}requestUpdate(e,t){if(void 0!==e){const n=this.constructor._classProperties.get(e)||J;return this._requestPropertyUpdate(e,t,n)}return this._invalidate()}_requestPropertyUpdate(e,t,n){return this.constructor._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0===n.reflect&&(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n)),this._invalidate()):this.updateComplete}async _invalidate(){if(!this._hasRequestedUpdate){this._updateState|=Q;let e;const t=this._updatePromise;this._updatePromise=new Promise(t=>e=t),await t,this._validate(),e(!this._hasRequestedUpdate)}return this.updateComplete}get _hasRequestedUpdate(){return this._updateState&Q}_validate(){if(this._instanceProperties&&this._applyInstanceProperties(),this.shouldUpdate(this._changedProperties)){const e=this._changedProperties;this.update(e),this._markUpdated(),this._updateState&Z||(this._updateState|=Z,this.firstUpdated(e)),this.updated(e)}else this._markUpdated()}_markUpdated(){this._changedProperties=new Map,this._updateState&=~Q}get updateComplete(){return this._updatePromise}shouldUpdate(){return!0}update(){if(void 0!==this._reflectingProperties&&0<this._reflectingProperties.size){for(const[e,t]of this._reflectingProperties)this._propertyToAttribute(e,this[e],t);this._reflectingProperties=void 0}}updated(){}firstUpdated(){}}te._attributeToPropertyMap=new Map,te._finalized=!0,te._classProperties=new Map,te.properties={};const ne=e=>t=>(window.customElements.define(e,t),t),re=e=>(t,n)=>{t.constructor.createProperty(n,e)};class oe extends te{update(e){super.update(e);const t=this.render();t instanceof P&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this})}render(){}}oe.render=G;var ae=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},de=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class ie extends oe{updated(e){e.has("mathcolor")&&this.style.setProperty("--math-color",this.mathcolor||null),e.has("mathbackground")&&this.style.setProperty("--math-background",this.mathbackground||null)}}ae([re({type:String}),de("design:type",String)],ie.prototype,"mathbackground",void 0),ae([re({type:String}),de("design:type",String)],ie.prototype,"mathcolor",void 0);e.MathElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        font-size: inherit;
        font-style: normal;
        font-family: serif;
        line-height: 1.5;
        word-spacing: normal;
        letter-spacing: normal;
        text-rendering: optimizeLegibility;
        direction: ltr;
        unicode-bidi: embed;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-ml")],e.MathElement);const le=`.layout.vertical {
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
}`,se=`.flex {
  -ms-flex: 1 1 0.000000001px;
  -webkit-flex: 1;
  flex: 1;
  -webkit-flex-basis: 0.000000001px;
  flex-basis: 0.000000001px;
}`,pe=`.center {
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}`,he=D`
  ${le}
  ${".layout.horizontal {\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -ms-flex-direction: row;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n}"}
  ${se}
  ${pe}
`,ce=D`
  ${le}
  ${se}
`,ue=D`
  ${".layout.horizontal {\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -ms-flex-direction: row;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n}"}
  ${se}
`,me=D`
  ${".layout.horizontal {\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -ms-flex-direction: row;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n}"}
  ${se}
  ${pe}
`;e.MathRowElement=class extends ie{render(){return D`
    <style>
      ${ue}
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .layout.horizontal {
        align-items: baseline;
      }
      .layout.horizontal.centered {
        align-items: center;
      }
      .layout.horizontal.justified {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      }
    </style>
    <div id="mrowPanel" class="horizontal layout"><slot @slotchange="${this.onSlotChange}"></slot></div>
    `}onSlotChange(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot"),t=this.shadowRoot.querySelector("#mrowPanel");if(!e||!t)return;t.classList.remove("centered");const n=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);let r=0,o=0,a=!1;for(let e=0;e<n.length;e++){const t=(n[e].textContent||"").trim();if("="===t){a=!0;break}const d=n[e].tagName.toLowerCase();switch(d){case"math-underover":case"math-under":case"math-over":case"math-subsup":o++;break;case"math-o":r++;break;case"math-table":a=!0;break;default:}}a||!o||r||(a=!0),a&&t.classList.add("centered"),t.classList.remove("justified"),("center"===(getComputedStyle(this).getPropertyValue("--math-underover-align")||"").trim()||"center"===(getComputedStyle(this).getPropertyValue("--math-under-align")||"").trim()||"center"===(getComputedStyle(this).getPropertyValue("--math-over-align")||"").trim())&&t.classList.add("justified")}},e.MathRowElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-row")],e.MathRowElement);e.MathNElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathNElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-n")],e.MathNElement);var ge=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},ye=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathOElement=class extends ie{constructor(){super(...arguments),this.formStyle=""}render(){return D`
    <style>
      :host {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        position: relative;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      :host(.mo-infix) {
        margin: 0 0.2em;
      }
      :host(.mo-separator) {
        margin: 0 0.2em 0 0;
      }
      :host(.mo-product) {
        margin: 0;
      }
      :host(.mo-begin-brace) {
        margin: 0 0.05em 0 0.2em;
      }
      :host(.mo-end-brace) {
        margin: 0 0.2em 0 0.05em;
      }
      :host(.mo-neut-brace) {
        margin: 0 0.16em;
      }
      :host(.mo-stretchy) {
        align-self: stretch;
      }
      :host(.mo-bigger) {
        line-height: 1.1;
        font-size: 1.8em;
      }
      .invisible {
        opacity: 0;
      }
      .fullWidthSpan {
        width: 100%;
        box-sizing: border-box;
        text-align: center;
      }
    </style>
    <span class="invisible"><slot @slotchange="${this.onSlotChange}"></slot></span>
    `}updated(e){super.updated(e),this.onSlotChange()}onSlotChange(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("span");if(!e)return;let t="";const n=(this.textContent||"").trim();","===n||";"===n?t="separator":"."===n||"\u22C5"===n?t="product":n.match(/^[\[{(]*$/)?t="begin-brace":n.match(/^[\]})]*$/)?t="end-brace":n.match(/^[|]*$/)&&(t="neut-brace"),this.classList.remove("mo-bigger"),n&&8704<=n.charCodeAt(0)&&8755>=n.charCodeAt(0)&&"sub"!==(getComputedStyle(this).getPropertyValue("--math-style-level")||"").trim()&&this.classList.add("mo-bigger");const r=t||"infix";this.formStyle!==r&&(this.formStyle&&this.classList.remove(this.formStyle),this.formStyle=`mo-${r}`,this.classList.add(this.formStyle));let o=this.stretchy&&"true"===this.stretchy.trim().toLowerCase();this.stretchy||("true"===getComputedStyle(this).getPropertyValue("--math-style-stretchy").trim()?o=!0:o="begin-brace"==t||"end-brace"==t||"neut-brace"==t),e.style.width=null,o?(e.classList.remove("fullWidthSpan"),this.classList.add("mo-stretchy"),e.style.lineHeight="1",setTimeout(()=>{if(e.style.transform)return;e.classList.remove("invisible");const t=e.getBoundingClientRect(),n=this.getBoundingClientRect(),r=t.height?n.height/t.height:1,o=t.width?n.width/t.width:1;1>=r&&(e.style.lineHeight=null),1!==o&&(e.style.width="100%"),e.style.transform=`scale(${o}, ${r})`},50)):(e.classList.add("fullWidthSpan"),this.classList.remove("mo-stretchy"),e.style.transform=null,e.style.lineHeight=null,e.classList.remove("invisible"))}},ge([re({type:String}),ye("design:type",String)],e.MathOElement.prototype,"form",void 0),ge([re({type:String}),ye("design:type",String)],e.MathOElement.prototype,"stretchy",void 0),e.MathOElement=ge([o("math-o")],e.MathOElement);e.MathIElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        font-style: italic;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathIElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-i")],e.MathIElement);var fe=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},be=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathSElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      :host:before {
        content: "\\0022";
        margin-right: -0.2em;
      }
      :host:after {
        content: "\\0022";
        margin-left: -0.2em;
      }
      :host([lquote]):before {
        content: attr(lquote)
      }
      :host([rquote]):after {
        content: attr(rquote)
      }
    </style>
    <slot></slot>
    `}},fe([re({type:String,reflect:!0}),be("design:type",String)],e.MathSElement.prototype,"lquote",void 0),fe([re({type:String,reflect:!0}),be("design:type",String)],e.MathSElement.prototype,"rquote",void 0),e.MathSElement=fe([o("math-s")],e.MathSElement);var Ee=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Pe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathSpaceElement=class extends ie{constructor(){super(...arguments),this.width="0em",this.height="0ex",this.depth="0ex"}render(){return D`
    <style>
      :host {
        display: inline-block;
        vertical-align: top;
        background: var(--math-background, inherit);
      }
    </style>
    `}updated(e){super.updated(e),this.style.width=this.width,this.style.height=this.height,this.style.marginBottom=this.depth}},Ee([re({type:String}),Pe("design:type",Object)],e.MathSpaceElement.prototype,"width",void 0),Ee([re({type:String}),Pe("design:type",Object)],e.MathSpaceElement.prototype,"height",void 0),Ee([re({type:String}),Pe("design:type",Object)],e.MathSpaceElement.prototype,"depth",void 0),e.MathSpaceElement=Ee([o("math-space")],e.MathSpaceElement);e.MathTextElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        white-space: nowrap;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathTextElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-text")],e.MathTextElement);var we=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Se=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathGlyphElement=class extends ie{constructor(){super(...arguments),this.width="auto",this.height="auto",this.valign="auto",this.alt=""}render(){const e=this.valign?0===this.valign.indexOf("-")?this.valign.substring(1):`-${this.valign}`:"0",t=this.src?`width: ${this.width||"auto"}; height: ${this.height||"auto"}; transform: translate3d(0,${e},0);`:"display: none;";return D`
    <style>
      :host {
        display: inline-block;
        background: var(--math-background, inherit);
      }
      img {
        display: block;
      }
    </style>
    <img src="${this.src||""}" alt="${this.alt}" style="${t}">
    `}},we([re({type:String}),Se("design:type",String)],e.MathGlyphElement.prototype,"src",void 0),we([re({type:String}),Se("design:type",Object)],e.MathGlyphElement.prototype,"width",void 0),we([re({type:String}),Se("design:type",Object)],e.MathGlyphElement.prototype,"height",void 0),we([re({type:String}),Se("design:type",Object)],e.MathGlyphElement.prototype,"valign",void 0),we([re({type:String}),Se("design:type",Object)],e.MathGlyphElement.prototype,"alt",void 0),e.MathGlyphElement=we([o("math-glyph")],e.MathGlyphElement);var ve=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Me=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class _e extends ie{updateAlignment(){const e=this.style;if(this.columnalign)switch(this.columnalign){case"left":e.setProperty("--math-ml-columnalign","left");break;case"right":e.setProperty("--math-ml-columnalign","right");break;default:case"center":e.setProperty("--math-ml-columnalign","center");}if(this.rowalign)switch(this.rowalign){case"baseline":e.setProperty("--math-ml-rowalign","baseline");break;case"bottom":e.setProperty("--math-ml-rowalign","bottom");break;case"axis":case"center":e.setProperty("--math-ml-rowalign","middle");break;case"top":e.setProperty("--math-ml-rowalign","top");break;default:e.removeProperty("--math-ml-rowalign");}}}ve([re({type:String}),Me("design:type",String)],_e.prototype,"columnalign",void 0),ve([re({type:String}),Me("design:type",String)],_e.prototype,"rowalign",void 0);e.MathTDElement=class extends _e{render(){return D`
    <style>
      :host {
        display: table-cell;
        text-align: var(--math-ml-columnalign);
        vertical-align: var(--math-ml-rowalign);
        padding-left: var(--math-table-columnspacing);
        padding-right: var(--math-table-columnspacing);
        padding-top: var(--math-table-rowspacing);
        padding-bottom: var(--math-table-rowspacing);
        padding-left: calc(var(--math-table-columnspacing)/2);
        padding-right: calc(var(--math-table-columnspacing)/2);
        padding-top: calc(var(--math-table-rowspacing)/2);
        padding-bottom: calc(var(--math-table-rowspacing)/2);
        border-bottom: var(--math-table-row-border);
        border-right: var(--math-table-column-border);
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}updated(e){super.updated(e),this.updateAlignment()}},e.MathTDElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-td")],e.MathTDElement);e.MathTRElement=class extends _e{render(){return D`
    <style>
      :host {
        display: table-row;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      slot::slotted(math-td:last-child) {
        --math-table-column-border: none;
      }
    </style>
    <slot @slotchange="${this.refreshSlot}"></slot>
    `}updated(e){super.updated(e),this.updateAlignment(),this.refreshSlot()}refreshSlot(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");if(e&&this.columnalign){const t=this.columnalign.trim().split(" ").filter(e=>!!e.trim());if(1<t.length){const n=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE).filter(e=>"MATH-TD"===e.tagName);for(let e=0;e<t.length&&!(e>=n.length);e++)n[e].columnalign=t[e]}}}}},e.MathTRElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-tr")],e.MathTRElement);e.MathLabeledTRElement=class extends _e{render(){return D`
    <style>
      :host {
        display: table-row;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      slot::slotted(math-td:first-child) {
        display: none;
      }
      slot::slotted(math-td:last-child) {
        --math-table-column-border: none;
      }
    </style>
    <slot></slot>
    `}updated(e){super.updated(e),this.updateAlignment()}},e.MathLabeledTRElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-labeledtr")],e.MathLabeledTRElement);var Ne=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},xe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathTableElement=class extends _e{constructor(){super(),this.columnlines="none",this.rowlines="none",this.frame="none",this.columnspacing="0.8em",this.rowspacing="0.8em",this.framespacing="0.4em 0.5ex",this.columnalign=this.columnalign||"center"}render(){return D`
    <style>
      :host {
        display: inline-table;
        border: var(--math-table-border, 'none');
        padding: var(--math-table-padding, 0.5ex 0.4em);
        width: var(--math-table-width);
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      slot::slotted(math-tr:last-child) {
        --math-table-row-border: none;
      }
    </style>
    <slot></slot>
    `}updated(e){super.updated(e),this.updateAlignment();const t=this.style;if(this.frame)switch(this.frame){case"none":t.setProperty("--math-table-border","none");break;case"solid":t.setProperty("--math-table-border","solid thin");break;case"dashed":t.setProperty("--math-table-border","dashed thin");break;default:t.removeProperty("--math-table-border");}if(this.rowlines)switch(this.rowlines){case"none":t.setProperty("--math-table-row-border","none");break;case"solid":t.setProperty("--math-table-row-border","solid thin");break;case"dashed":t.setProperty("--math-table-row-border","dashed thin");break;default:t.removeProperty("--math-table-row-border");}if(this.columnlines)switch(this.columnlines){case"none":t.setProperty("--math-table-column-border","none");break;case"solid":t.setProperty("--math-table-column-border","solid thin");break;case"dashed":t.setProperty("--math-table-column-border","dashed thin");break;default:t.removeProperty("--math-table-column-border");}if(this.framespacing){const e=this.framespacing.split(" ").reverse();t.setProperty("--math-table-padding",e.join(" "))}else t.removeProperty("--math-table-padding");if(this.width?t.setProperty("--math-table-width",this.width):t.removeProperty("--math-table-width"),this.columnspacing?t.setProperty("--math-table-columnspacing",this.columnspacing):t.removeProperty("--math-table-columnspacing"),this.rowspacing?t.setProperty("--math-table-rowspacing",this.columnspacing):t.removeProperty("--math-table-rowspacing"),this.columnalign){const e=this.columnalign.trim().split(" ").filter(e=>!!e.trim());if(1<e.length){const e=this.shadowRoot.querySelector("slot");e&&e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE).filter(e=>"MATH-TR"===e.tagName||"MATH-LABELEDTR"===e.tagName).forEach(e=>{const t=e;t.columnalign=t.columnalign||this.columnalign.trim()})}}}},Ne([re({type:String}),xe("design:type",String)],e.MathTableElement.prototype,"columnlines",void 0),Ne([re({type:String}),xe("design:type",String)],e.MathTableElement.prototype,"rowlines",void 0),Ne([re({type:String}),xe("design:type",String)],e.MathTableElement.prototype,"frame",void 0),Ne([re({type:String}),xe("design:type",Object)],e.MathTableElement.prototype,"columnspacing",void 0),Ne([re({type:String}),xe("design:type",Object)],e.MathTableElement.prototype,"rowspacing",void 0),Ne([re({type:String}),xe("design:type",Object)],e.MathTableElement.prototype,"framespacing",void 0),Ne([re({type:String}),xe("design:type",String)],e.MathTableElement.prototype,"width",void 0),e.MathTableElement=Ne([o("math-table"),xe("design:paramtypes",[])],e.MathTableElement);e.MathSupElement=class extends ie{render(){return D`
    <style>
      ${ue}
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:first-child) {
        padding-right: 0.16em;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.8em;
        --math-style-level: sub;
        position: absolute;
        left: 100%;
        opacity: 0;
        line-height: 1;
      }
    </style>
    <div class="horizontal layout">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}refreshSlot(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot");if(!e)return;const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);1<t.length&&setTimeout(()=>{const e=t[0].getBoundingClientRect(),n=t[1],r=n.getBoundingClientRect();n.style.opacity="1";const o=[0,0],a=r.bottom-(e.bottom-e.height/2);0<a&&(n.style.top=`${-a}px`,o[0]=a),o[1]=r.width+5,this.style.margin=`${o[0]}px ${o[1]}px 0 0`},50)}},e.MathSupElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-sup")],e.MathSupElement);e.MathSubElement=class extends ie{render(){return D`
    <style>
      ${ue}
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:first-child) {
        padding-right: 0.1em;
        margin: 0;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.8em;
        --math-style-level: sub;
        position: absolute;
        left: 100%;
        opacity: 0;
        line-height: 1;
      }
    </style>
    <div class="horizontal layout">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}refreshSlot(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot");if(!e)return;const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);1<t.length&&setTimeout(()=>{const e=t[0].getBoundingClientRect(),n=t[1],r=n.getBoundingClientRect();n.style.opacity="1";const o=[0,0],a=e.height/2;let d=a;a+r.height<e.height?d=e.height-r.height:o[0]=a+r.height-e.height,n.style.top=`${d}px`,o[1]=r.width+5,this.style.margin=`0 ${o[1]}px ${o[0]}px 0`},50)}},e.MathSubElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-sub")],e.MathSubElement);e.MathSubSupElement=class extends ie{constructor(){super(...arguments),this.pendingLayout=!1}render(){return D`
    <style>
      ${ue}
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:first-child) {
        padding-right: 0.16em;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.75em;
        --math-style-level: sub;
        position: absolute;
        left: 100%;
        opacity: 0;
        line-height: 1;
      }
    </style>
    <div class="horizontal layout">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}refreshSlot(){if(this.pendingLayout)return;if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot");if(!e)return;const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if(2<t.length){this.pendingLayout=!0;const e=()=>{const e=t[0].getBoundingClientRect(),n=t[1],r=t[2],o=n.getBoundingClientRect(),d=r.getBoundingClientRect();n.style.opacity="1",r.style.opacity="1";const i=[0,0,0],l=e.height/2;let s=l;l+o.height<e.height?s=e.height-o.height:i[2]=l+o.height-e.height,n.style.top=`${s}px`,i[1]=o.width+5,s=d.bottom-(e.bottom-e.height/2),0<s&&(r.style.top=`${-s}px`,i[0]=s),i[1]=a(d.width+5,i[1]),this.style.margin=`${i[0]}px ${i[1]}px ${i[2]}px 0`};setTimeout(e,50),setTimeout(()=>{this.pendingLayout=!1,e()},500)}}},e.MathSubSupElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-subsup")],e.MathSubSupElement);e.MathMultiScriptsElement=class extends ie{constructor(){super(...arguments),this.pendingLayout=!1}render(){return D`
    <style>
      ${he}
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:first-child) {
        padding: 0 0.16em;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.75em;
        --math-style-level: sub;
        position: absolute;
        opacity: 0;
        line-height: 1;
      }
      ::slotted(.rightscript) {
        left: 100%;
      }
      ::slotted(.leftscript) {
        right: 100%;
      }
    </style>
    <div class="horizontal layout">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}refreshSlot(){if(this.pendingLayout)return;if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("slot");if(!e)return;const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if((1!==t.length||t[0].tagName!=="math-prescripts".toUpperCase())&&2<t.length){this.pendingLayout=!0;const e=()=>{const e=[null,null],r=[null,null];let o=e;for(let e=1;e<t.length;e++){const a=t[e];a.tagName==="math-prescripts".toUpperCase()?o=r:o[0]?!o[1]&&(o[1]=a):o[0]=a}const d=t[0].getBoundingClientRect(),n=[0,0,0,0];{if(e[0]){const t=e[0],r=t.getBoundingClientRect();t.style.opacity="1",t.classList.add("rightscript");const o=d.height/2;let a=o;o+r.height<d.height?a=d.height-r.height:n[2]=o+r.height-d.height,t.style.top=`${a}px`,n[1]=r.width+5}if(e[1]){const t=e[1];t.style.opacity="1",t.classList.add("rightscript");const r=t.getBoundingClientRect(),o=r.bottom-(d.bottom-d.height/2);0<o&&(t.style.top=`${-o}px`,n[0]=o),n[1]=a(r.width+5,n[1])}}{if(r[0]){const e=r[0],t=e.getBoundingClientRect();e.style.opacity="1",e.classList.add("leftscript");const o=d.height/2;let i=o;o+t.height<d.height?i=d.height-t.height:n[2]=a(o+t.height-d.height,n[2]),e.style.top=`${i}px`,n[3]=a(t.width+5,n[3])}if(r[1]){const e=r[1];e.style.opacity="1",e.classList.add("leftscript");const t=e.getBoundingClientRect(),o=t.bottom-(d.bottom-d.height/2);0<o&&(e.style.top=`${-o}px`,n[0]=a(o,n[0])),n[3]=a(t.width+5,n[3])}}this.style.margin=`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px`};setTimeout(e,100),setTimeout(()=>{this.pendingLayout=!1,e()},800)}}},e.MathMultiScriptsElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-multiscripts")],e.MathMultiScriptsElement);e.MathPreScriptsElement=class extends ie{render(){return D`
    <style>
      :host {
        width: 0;
        height: 0;
        display: none;
      }
    </style>
    `}},e.MathPreScriptsElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-prescripts")],e.MathPreScriptsElement);e.MathNoneElement=class extends ie{render(){return D`
    <style>
      :host {
        height: 0;
        width: 0;
        padding: 0 3px;
      }
    </style>
    `}},e.MathNoneElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-none")],e.MathNoneElement);var Ce=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Te=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathOverElement=class extends ie{constructor(){super(...arguments),this.accent=!1,this.align="center"}render(){return D`
    <style>
      ${ce}
      :host {
        display: inline-block;
        margin: 0 0.16em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .vertical.layout.reverse {
        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      }
      ::slotted(:not(:first-child)) {
        width: 100%;
        line-height: 1;
        margin: 0;
        text-align: var(--math-over-align, center);
        --math-style-level: sub;
        font-size: var(--math-over-font-size, 0.8em);
        --math-style-stretchy: true;
      }
    </style>
    <div class="vertical layout reverse">
      <slot></slot>
    </div>
    `}updated(e){super.updated(e);const t=this.style;switch(this.align){case"right":t.setProperty("--math-over-align","right");break;case"left":t.setProperty("--math-over-align","left");break;default:t.setProperty("--math-over-align","center");}t.setProperty("--math-over-font-size",this.accent?"1em":"0.8em")}},Ce([re({type:Boolean,reflect:!0}),Te("design:type",Object)],e.MathOverElement.prototype,"accent",void 0),Ce([re(),Te("design:type",String)],e.MathOverElement.prototype,"align",void 0),e.MathOverElement=Ce([o("math-over")],e.MathOverElement);var Re=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Oe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathUnderElement=class extends ie{constructor(){super(...arguments),this.accentunder=!1,this.align="center"}render(){return D`
    <style>
      ${ce}
      :host {
        display: inline-block;
        margin: 0 0.16em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      ::slotted(:not(:first-child)) {
        width: 100%;
        line-height: 1;
        margin: 0;
        text-align: var(--math-under-align, center);
        --math-style-level: sub;
        font-size: var(--math-under-font-size, 0.8em);
        --math-style-stretchy: true;
      }
    </style>
    <div class="vertical layout">
      <slot></slot>
    </div>
    `}updated(e){super.updated(e);const t=this.style;switch(this.align){case"right":t.setProperty("--math-under-align","right");break;case"left":t.setProperty("--math-under-align","left");break;default:t.setProperty("--math-under-align","center");}t.setProperty("--math-under-font-size",this.accentunder?"1em":"0.8em")}},Re([re({type:Boolean,reflect:!0}),Oe("design:type",Object)],e.MathUnderElement.prototype,"accentunder",void 0),Re([re(),Oe("design:type",String)],e.MathUnderElement.prototype,"align",void 0),e.MathUnderElement=Re([o("math-under")],e.MathUnderElement);var Le=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Ae=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathUnderOverElement=class extends ie{constructor(){super(...arguments),this.accent=!1,this.accentunder=!1,this.align="center"}render(){return D`
    <style>
      ${ce}
      :host {
        display: inline-block;
        margin: 0 0.16em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .vertical.layout.reverse {
        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      }
      .under {
        width: 100%;
        line-height: 1;
        margin: 0;
        text-align: var(--math-underover-align, center);
        --math-style-level: sub;
        font-size: var(--math-under-font-size, 0.75em);
        --math-style-stretchy: true;
      }
      .over {
        width: 100%;
        line-height: 1;
        margin: 0;
        text-align: var(--math-underover-align, center);
        --math-style-level: sub;
        font-size: var(--math-over-font-size, 0.75em);
        --math-style-stretchy: true;
      }
      .base {
        margin: 0;
      }
    </style>
    <div id="muoPanel" class="vertical layout"></div>
    <div style="display: hidden;">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}updated(e){super.updated(e);const t=this.style;switch(this.align){case"right":t.setProperty("--math-underover-align","right");break;case"left":t.setProperty("--math-underover-align","left");break;default:t.setProperty("--math-underover-align","center");}t.setProperty("--math-under-font-size",this.accentunder?"1em":"0.75em"),t.setProperty("--math-over-font-size",this.accent?"1em":"0.75em"),this.refreshSlot()}refreshSlot(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");if(e){const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if(t.length){const e=this.shadowRoot.querySelector("#muoPanel");for(;e.firstChild;)e.removeChild(e.firstChild);2<t.length&&(t[2].classList.add("over"),e.appendChild(t[2])),t[0].classList.add("base"),e.append(t[0]),1<t.length&&(t[1].classList.add("under"),e.appendChild(t[1]))}}}}},Le([re({type:Boolean,reflect:!0}),Ae("design:type",Object)],e.MathUnderOverElement.prototype,"accent",void 0),Le([re({type:Boolean,reflect:!0}),Ae("design:type",Object)],e.MathUnderOverElement.prototype,"accentunder",void 0),Le([re(),Ae("design:type",String)],e.MathUnderOverElement.prototype,"align",void 0),e.MathUnderOverElement=Le([o("math-underover")],e.MathUnderOverElement);e.MathSqrtElement=class extends ie{render(){return D`
    <style>
      ${ue}
      :host {
        display: inline-block;
        vertical-align: bottom;
        align-self: center;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .msqrtContent {
        padding: 1px 0.05em 0 0.2em;
        border-top: solid thin;
        white-space: nowrap;
      }
      #msqrtGlyphSpan {
        width: 1.1em;
        position: relative;
      }
      svg {
        position: absolute;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
      }
      path {
        fill: none;
        stroke: currentColor;
        stroke-width: 1;
      }
    </style>
    <div class="horizontal layout">
      <div id="msqrtGlyphSpan"><svg><path id="rootPath"></path></svg></div>
      <div class="flex msqrtContent"><slot @slotchange="${this.onSlotCange}"></slot></div>
    </div>
    `}updated(e){super.updated(e),this.onSlotCange()}onSlotCange(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");e&&setTimeout(()=>{this.drawRoot()},10)}}drawRoot(){const e=this.shadowRoot.querySelector("#msqrtGlyphSpan"),t=this.shadowRoot.querySelector("#rootPath");if(e&&t){const n=e.getBoundingClientRect(),r=n.width,o=n.height;t.setAttribute("d",`M0 ${.55*o} H${.13*r} L${.45*r} ${o-2} L${r} 0`)}}},e.MathSqrtElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-sqrt")],e.MathSqrtElement);e.MathRootElement=class extends ie{render(){return D`
    <style>
      ${ue}
      :host {
        display: inline-block;
        vertical-align: bottom;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      .msqrtContent {
        padding: 1px 0.05em 0 0.2em;
        border-top: solid thin;
        white-space: nowrap;
      }
      #msqrtGlyphSpan {
        width: 1.1em;
        position: relative;
      }
      svg {
        position: absolute;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
      }
      path {
        fill: none;
        stroke: currentColor;
        stroke-width: 1;
      }
      ::slotted(:not(:first-child)) {
        font-size: 0.66em;
        position: absolute;
        top: 52%;
        right: 57%;
        transform: translate3d(-100%,-100%,0);
      }
    </style>
    <div class="horizontal layout" style="position: relative;">
      <div id="msqrtGlyphSpan"><svg><path id="rootPath"></path></svg></div>
      <div class="flex msqrtContent"><slot @slotchange="${this.onSlotCange}"></slot></div>
    </div>
    `}updated(e){super.updated(e),this.onSlotCange()}onSlotCange(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");e&&setTimeout(()=>{this.drawRoot()},10)}}drawRoot(){const e=this.shadowRoot.querySelector("#msqrtGlyphSpan"),t=this.shadowRoot.querySelector("#rootPath");if(e&&t){const n=e.getBoundingClientRect(),r=n.width,o=n.height;t.setAttribute("d",`M0 ${.55*o} H${.13*r} L${.45*r} ${o-2} L${r} 0`)}}},e.MathRootElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-root")],e.MathRootElement);var je=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},De=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathFracElement=class extends ie{constructor(){super(...arguments),this.bevelled=!1,this.numalign="center",this.denomalign="center"}render(){let e="stroke-width: 1;",t="border-top: solid thin;";return this.linethickness&&"0"===this.linethickness.trim().charAt(0)&&(e="stroke-width: 0;",t=""),D`
    <style>
      :host {
        display: inline-block;
        vertical-align: middle;
        align-self: self-start;
        margin: 0 0.16em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      #mfracN, #mfracD {
        font-size: 0.9em;
        --math-style-level: sub;
      }
      #mfracPanel.unbevelled {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      }
      #mfracPanel.bevelled {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
      }
      #mfracPanel.bevelled #mfracN{
        transform: translateY(-0.3em);
      }
      #mfracPanel.bevelled #mfracD{
        transform: translateY(0.3em);
      }
      #mfracDivider.unbevelled {
        width: 100%;
        border-top: 1px solid;
      }
      #bevelledDivider {
        min-width: 6px;
        position: relative;
        margin: 0 0.2em;
      }
      #unbevelledDivider {
        width: 100%;
        height: 0;
      }
      .hidden {
        display: none !important;
      }
      svg {
        position: absolute;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
      }
      path {
        fill: none;
        stroke: currentColor;
      }
    </style>
    <div id="mfracPanel">
      <div id="mfracN"></div>
      <div id="bevelledDivider" class="hidden">&nbsp;<svg><path id="bevelledPath" style="${e}"></path></svg></div>
      <div id="unbevelledDivider" style="${t}"></div>
      <div id="mfracD"></div>
    </div>
    <div style="display: hidden;"><slot @slotchange="${this.refreshSlot}"></slot></div>
    `}updated(e){super.updated(e),this.refreshSlot()}refreshSlot(){if(this.shadowRoot){const e=this.shadowRoot.querySelector("slot");if(e){const t=e.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if(1<t.length){const e=this.shadowRoot.querySelector("#mfracN"),n=this.shadowRoot.querySelector("#mfracD");e.appendChild(t[0]),n.appendChild(t[1]);for(let e=2;e<t.length;e++)t[e].parentElement&&t[e].parentElement.removeChild(t[e])}this.updateBevlled()}}}updateBevlled(){const e=this.shadowRoot.querySelector("#mfracPanel"),t=this.shadowRoot.querySelector("#mfracN"),n=this.shadowRoot.querySelector("#mfracD"),r=this.shadowRoot.querySelector("#bevelledDivider"),o=this.shadowRoot.querySelector("#unbevelledDivider");t.style.textAlign=this.numalign,n.style.textAlign=this.denomalign,this.bevelled?(e.classList.remove("unbevelled"),e.classList.add("bevelled"),r.classList.remove("hidden"),o.classList.add("hidden"),setTimeout(()=>{this.drawBevelledDivider()},10)):(e.classList.remove("bevelled"),e.classList.add("unbevelled"),r.classList.add("hidden"),o.classList.remove("hidden"))}drawBevelledDivider(){const e=this.shadowRoot.querySelector("#bevelledDivider"),t=this.shadowRoot.querySelector("#bevelledPath");if(e&&t){const n=e.getBoundingClientRect(),r=n.width,o=n.height;t.setAttribute("d",`M0 ${o} L${r} 0`)}}},je([re({type:Boolean}),De("design:type",Object)],e.MathFracElement.prototype,"bevelled",void 0),je([re({type:String}),De("design:type",String)],e.MathFracElement.prototype,"numalign",void 0),je([re({type:String}),De("design:type",String)],e.MathFracElement.prototype,"denomalign",void 0),je([re({type:String}),De("design:type",String)],e.MathFracElement.prototype,"linethickness",void 0),e.MathFracElement=je([o("math-frac")],e.MathFracElement);var qe=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s};const Ve="http://www.w3.org/2000/svg";e.MathEncloseElement=class extends ie{constructor(){super(...arguments),this.notation="longdiv"}render(){return D`
    <style>
      :host {
        display: inline-block;
        position: relative;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      svg {
        position: absolute;
        left: 0;
        top: 0;
        pointer-events: none;
      }
      ellipse, path {
        fill: none;
        stroke: currentColor;
        stroke-width: 1;
      }
    </style>
    <div id="menclosePanel"><slot @slotchange="${this.refresh}"></slot></div>
    <svg></svg>
    `}updated(e){super.updated(e),this.refresh()}refresh(){this.shadowRoot&&this.shadowRoot.querySelector("svg")&&this.shadowRoot.querySelector("slot")&&setTimeout(()=>this.redraw(),100)}adjustPadding(e,t){for(let n=0;n<t.length;n++)e[n]=a(e[n],t[n])}redraw(){const e=this.shadowRoot.querySelector("svg"),n=this.shadowRoot.querySelector("#menclosePanel"),r=this.getBoundingClientRect(),o=[0,0,0,0],a=(this.notation||"").trim().split(" ").filter(e=>!!e.trim());a.forEach(e=>{"longdiv"===e?this.adjustPadding(o,[2,0,0,12]):"actuarial"===e?this.adjustPadding(o,[2,2,0,0]):"radical"===e?this.adjustPadding(o,[2,0,0,18]):"phasorangle"===e?this.adjustPadding(o,[0,0,2,16]):"circle"===e?this.adjustPadding(o,[2,4,2,4]):this.adjustPadding(o,[1,1,1,1])}),n.style.padding=o.join("px ").trim()+"px";const d=r.width+o[1]+o[3],i=r.height+o[0]+o[2];for(e.style.width=`${d}px`,e.style.height=`${i}px`;e.firstChild;)e.removeChild(e.firstChild);n.style.borderTop=null,n.style.borderBottom=null,n.style.borderLeft=null,n.style.borderRight=null,n.style.borderRadius=null,a.forEach(r=>{var t=Math.cos,o=Math.sin,a=Math.PI,l=Math.atan;switch(r){case"longdiv":{const t=document.createElementNS(Ve,"path");t.setAttribute("d",`M0 1 H ${d} M0 1 C 8 ${.33*i} 8 ${.66*i} 0 ${i}`),e.appendChild(t);break}case"actuarial":n.style.borderRight="1px solid",n.style.borderTop="1px solid";break;case"radical":{const t=document.createElementNS(Ve,"path");t.setAttribute("d",`M0 ${.55*i} H${18*.13} L${18*.45} ${i-2} L${18} 1 L${d} 1`),e.appendChild(t);break}case"box":n.style.borderRight="1px solid",n.style.borderTop="1px solid",n.style.borderLeft="1px solid",n.style.borderBottom="1px solid";break;case"roundedbox":n.style.borderRight="1px solid",n.style.borderTop="1px solid",n.style.borderLeft="1px solid",n.style.borderBottom="1px solid",n.style.borderRadius="5px";break;case"circle":{const t=document.createElementNS(Ve,"ellipse");t.setAttribute("cx",`${d/2}`),t.setAttribute("cy",`${i/2}`),t.setAttribute("rx",`${d/2-2}`),t.setAttribute("ry",`${i/2-2}`),e.appendChild(t);break}case"left":n.style.borderLeft="1px solid";break;case"right":n.style.borderRight="1px solid";break;case"top":n.style.borderTop="1px solid";break;case"bottom":n.style.borderBottom="1px solid";break;case"madruwb":n.style.borderRight="1px solid",n.style.borderBottom="1px solid";break;case"updiagonalstrike":{const t=document.createElementNS(Ve,"path");t.setAttribute("d",`M1 ${i-1} L${d-1} ${1}`),e.appendChild(t);break}case"downdiagonalstrike":{const t=document.createElementNS(Ve,"path");t.setAttribute("d",`M1 1 L${d-1} ${i-1}`),e.appendChild(t);break}case"verticalstrike":{const t=document.createElementNS(Ve,"path");t.setAttribute("d",`M${d/2} 1 L${d/2} ${i-1}`),e.appendChild(t);break}case"horizontalstrike":{const t=document.createElementNS(Ve,"path");t.setAttribute("d",`M1 ${i/2} L${d-1} ${i/2}`),e.appendChild(t);break}case"updiagonalarrow":{const n=document.createElementNS(Ve,"path");n.setAttribute("d",`M1 ${i-1} L${d-1} ${1}`),e.appendChild(n);const r=l(i/d),s=a/2-r-a/6,p=a/6+s,h=8*o(s),c=8*t(s),u=document.createElementNS(Ve,"path");u.setAttribute("d",`M${d-1} ${1} L${d-1-h} ${1+c} l${8*-t(p)} ${8*-o(p)} Z`),u.style.fill="currentColor",e.appendChild(u);break}case"phasorangle":{const t=document.createElementNS(Ve,"path");t.setAttribute("d",`M16 1 L1 ${i-1} L${d} ${i-1}`),e.appendChild(t);break}default:}})}},qe([re({type:String}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",Object)],e.MathEncloseElement.prototype,"notation",void 0),e.MathEncloseElement=qe([o("math-enclose")],e.MathEncloseElement);e.MathPhantomElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        visibility: hidden;
      }
    </style>
    <slot></slot>
    `}},e.MathPhantomElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-phantom")],e.MathPhantomElement);e.MathErrorElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        background: rgb(255, 255, 221);
        border: 1px solid red;
        font-weight: bold;
        font-family: sans-serif;
        font-size: 1.1em;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},e.MathErrorElement=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s}([o("math-error")],e.MathErrorElement);var Be=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},ke=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathFencedElement=class extends ie{constructor(){super(...arguments),this.close=")",this.open="(",this.separators=","}render(){return D`
    <style>
      ${me}
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
      #mfencedRow {
        align-items: stretch;
      }
    </style>
    <div id="mfencedRow" class="horizontal layout center"></div>
    <div style="display: hidden;">
      <slot @slotchange="${this.refreshSlot}"></slot>
    </div>
    `}updated(e){super.updated(e),this.refreshSlot()}isStretchyString(e){return!e.match(/^[0-9a-zA-Z,;\-_`'"]*$/)}nextSeparator(e){return 0<=e&&this.separators.length?e<this.separators.length?this.separators.charAt(e):this.separators.charAt(this.separators.length-1):null}refreshSlot(){if(!this.shadowRoot)return;const t=this.shadowRoot.querySelector("slot"),n=this.shadowRoot.querySelector("#mfencedRow");if(t&&n){const r=t.assignedNodes().filter(e=>e.nodeType===Node.ELEMENT_NODE);if(r.length){for(;n.firstChild;)n.removeChild(n.firstChild);let t=0;for(let o=0;o<r.length;o++){if(0==o&&this.open){const t=new e.MathOElement;this.isStretchyString(this.open.trim())&&(t.stretchy="true"),t.textContent=this.open,n.appendChild(t)}if(n.appendChild(r[o]),o<r.length-1){const r=this.nextSeparator(t);if(r){t++;const o=new e.MathOElement;this.isStretchyString(r)&&(o.stretchy="true"),o.textContent=r,n.appendChild(o)}}if(o==r.length-1&&this.close){const t=new e.MathOElement;this.isStretchyString(this.close.trim())&&(t.stretchy="true"),t.textContent=this.close,n.appendChild(t)}}}}}},Be([re({type:String}),ke("design:type",Object)],e.MathFencedElement.prototype,"close",void 0),Be([re({type:String}),ke("design:type",Object)],e.MathFencedElement.prototype,"open",void 0),Be([re({type:String}),ke("design:type",Object)],e.MathFencedElement.prototype,"separators",void 0),e.MathFencedElement=Be([o("math-fenced")],e.MathFencedElement);var Ue=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s},Fe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.MathPaddedElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <div id="mpaddedPanel"><slot></slot></div>
    `}updated(e){super.updated(e),this.refresh()}refresh(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector("#mpaddedPanel");e&&setTimeout(()=>{const t=e.getBoundingClientRect();this.height?"+"===this.height.charAt(0)?this.style.paddingTop=this.height.substring(1):"-"===this.height.charAt(0)?(this.style.height=`calc(${t.height}px - ${this.height.substring(1)})`,this.style.paddingTop="0"):(this.style.height=this.height,this.style.paddingTop="0"):(this.style.height="auto",this.style.paddingTop="0"),this.style.width=this.width?"+"===this.width.charAt(0)||"-"===this.width.charAt(0)?`calc(${t.width}px + ${this.width.substring(1)})`:this.width:"auto"},50)}},Ue([re({type:String}),Fe("design:type",String)],e.MathPaddedElement.prototype,"height",void 0),Ue([re({type:String}),Fe("design:type",String)],e.MathPaddedElement.prototype,"width",void 0),e.MathPaddedElement=Ue([o("math-padded")],e.MathPaddedElement);var Ie=function(e,t,n,o){var a,l=arguments.length,s=3>l?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;0<=p;p--)(a=e[p])&&(s=(3>l?a(s):3<l?a(t,n,s):a(t,n))||s);return 3<l&&s&&Object.defineProperty(t,n,s),s};return e.MathStyleElement=class extends ie{render(){return D`
    <style>
      :host {
        display: inline-block;
        color: var(--math-color, inherit);
        background: var(--math-background, inherit);
      }
    </style>
    <slot></slot>
    `}},Ie([re({type:String}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",String)],e.MathStyleElement.prototype,"displaystyle",void 0),e.MathStyleElement=Ie([o("math-style")],e.MathStyleElement),e}({});
